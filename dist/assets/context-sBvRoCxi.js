import{r as o,bi as y,B as P,as as g,x as O}from"./index-C1jPfLpN.js";function v(n){return!!(n!=null&&n.then)}const F=n=>{const{type:i,children:a,prefixCls:p,buttonProps:s,close:r,autoFocus:C,emitEvent:x,isSilent:f,quitOnNullishReturnValue:E,actionFn:l}=n,u=o.useRef(!1),m=o.useRef(null),[k,d]=y(!1),c=(...t)=>{r==null||r.apply(void 0,t)};o.useEffect(()=>{let t=null;return C&&(t=setTimeout(()=>{var e;(e=m.current)===null||e===void 0||e.focus({preventScroll:!0})})),()=>{t&&clearTimeout(t)}},[]);const b=t=>{v(t)&&(d(!0),t.then((...e)=>{d(!1,!0),c.apply(void 0,e),u.current=!1},e=>{if(d(!1,!0),u.current=!1,!(f!=null&&f()))return Promise.reject(e)}))},h=t=>{if(u.current)return;if(u.current=!0,!l){c();return}let e;if(x){if(e=l(t),E&&!v(e)){u.current=!1,c(t);return}}else if(l.length)e=l(r),u.current=!1;else if(e=l(),!v(e)){c();return}b(e)};return o.createElement(P,Object.assign({},g(i),{onClick:h,loading:k,prefixCls:p},s,{ref:m}),a)};function R(){}const S=o.createContext({add:R,remove:R});function T(n){const i=o.useContext(S),a=o.useRef(null);return O(s=>{if(s){const r=n?s.querySelector(n):s;i.add(r),a.current=r}else i.remove(a.current)})}export{F as A,T as u};
